{"version":3,"sources":["../../../../src/db/graphql/resolvers/updateProfileInfo.js"],"names":["executeUpdateProfileInfo","nonce","info","session","Session","findOne","where","err","response","user","getUser","set","save","console","error","message","updateProfileInfo","_","args","context","log"],"mappings":";;;;;;;;;;AAAA;;;;;;AAEA,MAAMA;AAAA,6CAA2B,WAAO,EAAEC,KAAF,EAASC,IAAT,EAAP,EAA2B;AAC1D,QAAI;AACF,UAAIC,UAAU,MAAM,wBAAGC,OAAH,CAAWC,OAAX,CAClB,EAAEC,OAAO,EAAEL,KAAF,EAAT,EADkB,CAApB;AAGA,UAAG,CAACE,OAAJ,EAAa;AAAE,eAAO,EAAEI,KAAK,IAAP,EAAaC,UAAU,+BAAvB,EAAP;AAAiE;AAChF,UAAIC,OAAO,MAAMN,QAAQO,OAAR,EAAjB;AACA,UAAG,CAACD,IAAJ,EAAU;AAAE,eAAO,EAAEF,KAAK,IAAP,EAAaC,UAAU,+BAAvB,EAAP;AAAiE;AAC7EC,WAAKE,GAAL,CAAST,IAAT;AACA,YAAMO,KAAKG,IAAL,EAAN;AACA,aAAO,EAAEL,KAAK,KAAP,EAAcC,UAAU,UAAxB,EAAP;AACD,KAVD,CAUE,OAAMD,GAAN,EAAW;AACXM,cAAQC,KAAR,CAAcP,GAAd;AACA,aAAO,EAAEA,KAAK,IAAP,EAAaC,UAAUD,IAAIQ,OAA3B,EAAP;AACD;AACF,GAfK;;AAAA;AAAA;AAAA;AAAA,IAAN;;AAiBA,MAAMC,oBAAoB,CAACC,CAAD,EAAIC,IAAJ,EAAUC,OAAV,KAAsB;AAC9CN,UAAQO,GAAR,CAAY,mBAAZ;AACA,SAAOpB,yBAAyBkB,IAAzB,CAAP;AACD,CAHD;;kBAKeF,iB","file":"updateProfileInfo.js","sourcesContent":["import db from '../../sequelize/models/db_connection'\n\nconst executeUpdateProfileInfo = async ({ nonce, info }) => {\n  try {\n    let session = await db.Session.findOne(\n      { where: { nonce } },\n    )\n    if(!session) { return { err: true, response: 'Whoops! Something went wrong.' } }\n    let user = await session.getUser()\n    if(!user) { return { err: true, response: 'Whoops! Something went wrong.' } }\n    user.set(info)\n    await user.save()\n    return { err: false, response: 'Success!' }\n  } catch(err) {\n    console.error(err)\n    return { err: true, response: err.message }\n  }\n}\n\nconst updateProfileInfo = (_, args, context) => {\n  console.log('updateProfileInfo')\n  return executeUpdateProfileInfo(args)\n}\n\nexport default updateProfileInfo\n"]}