{"version":3,"sources":["../../../../src/db/graphql/resolvers/getTeams.js"],"names":["executeGetTeams","nonce","session","Session","findOne","where","err","response","data","user","getUser","teams","getTeams","console","error","message","_","args","context","log"],"mappings":";;;;;;;;;;AAAA;;;;;;AAEA,MAAMA;AAAA,6CAAkB,WAAO,EAAEC,KAAF,EAAP,EAAqB;AAC3C,QAAI;AACF,UAAIC,UAAW,MAAM,wBAAGC,OAAH,CAAWC,OAAX,CAAmB,EAAEC,OAAO,EAAEJ,KAAF,EAAT,EAAnB,CAArB;AACA,UAAG,CAACC,OAAJ,EAAa;AAAE,eAAO,EAAEI,KAAK,IAAP,EAAaC,UAAU,+BAAvB,EAAwDC,MAAM,EAA9D,EAAP;AAA2E;AAC1F,UAAIC,OAAO,MAAMP,QAAQQ,OAAR,EAAjB;AACA,UAAG,CAACD,IAAJ,EAAU;AAAE,eAAO,EAAEH,KAAK,IAAP,EAAaC,UAAU,+BAAvB,EAAwDC,MAAM,EAA9D,EAAP;AAA2E;AACvF,UAAIG,QAAQ,MAAMF,KAAKG,QAAL,EAAlB;AACA,aAAO,EAAEN,KAAK,KAAP,EAAcC,UAAW,UAAzB,EAAoCC,MAAM,EAAEG,KAAF,EAA1C,EAAP;AACD,KAPD,CAOE,OAAML,GAAN,EAAW;AACXO,cAAQC,KAAR,CAAcR,GAAd;AACA,aAAO,EAAEA,KAAK,IAAP,EAAaC,UAAUD,IAAIS,OAA3B,EAAoCP,MAAM,EAA1C,EAAP;AACD;AACF,GAZK;;AAAA;AAAA;AAAA;AAAA,IAAN;;AAcA,MAAMI,WAAW,CAACI,CAAD,EAAIC,IAAJ,EAAUC,OAAV,KAAsB;AACrCL,UAAQM,GAAR,CAAY,UAAZ;AACA,SAAOnB,gBAAgBiB,IAAhB,CAAP;AACD,CAHD;;kBAKeL,Q","file":"getTeams.js","sourcesContent":["import db from '../../sequelize/models/db_connection'\n\nconst executeGetTeams = async ({ nonce }) => {\n  try {\n    let session =  await db.Session.findOne({ where: { nonce } })\n    if(!session) { return { err: true, response: 'Whoops! Something went wrong.', data: {} } }\n    let user = await session.getUser()\n    if(!user) { return { err: true, response: 'Whoops! Something went wrong.', data: {} } }\n    let teams = await user.getTeams()\n    return { err: false, response: `Success!`, data: { teams } }\n  } catch(err) {\n    console.error(err)\n    return { err: true, response: err.message, data: {} }\n  }\n}\n\nconst getTeams = (_, args, context) => {\n  console.log('getTeams')\n  return executeGetTeams(args)\n}\n\nexport default getTeams\n"]}