{"version":3,"sources":["../../../../src/db/graphql/resolvers/returnProfileInfo.js"],"names":["executeReturnProfileInfo","nonce","session","Session","findOne","where","err","response","data","user","getUser","get","plain","console","error","message","returnProfileInfo","_","args","context","log"],"mappings":";;;;;;;;;;;;;;AAAA;;;;;;AAEA,MAAMA;AAAA,6CAA2B,WAAO,EAAEC,KAAF,EAAP,EAAqB;AACpD,QAAI;AACF,UAAIC,UAAU,MAAM,wBAAGC,OAAH,CAAWC,OAAX,CAClB,EAAEC,OAAO,EAAEJ,KAAF,EAAT,EADkB,CAApB;AAGA,UAAG,CAACC,OAAJ,EAAa;AAAE,eAAO,EAAEI,KAAK,IAAP,EAAaC,UAAU,+BAAvB,EAAwDC,MAAM,EAA9D,EAAP;AAA2E;AAC1F,UAAIC,OAAO,MAAMP,QAAQQ,OAAR,EAAjB;AACA,UAAG,CAACD,IAAJ,EAAU;AAAE,eAAO,EAAEH,KAAK,IAAP,EAAaC,UAAU,+BAAvB,EAAwDC,MAAM,EAA9D,EAAP;AAA2E;AACvF,aAAO,EAAEF,KAAK,KAAP,EAAcC,UAAU,UAAxB,EAAoCC,iCAAWC,KAAKE,GAAL,CAAS,EAAEC,OAAO,IAAT,EAAT,CAAX,CAApC,EAAP;AACD,KARD,CAQE,OAAMN,GAAN,EAAW;AACXO,cAAQC,KAAR,CAAcR,GAAd;AACA,aAAO,EAAEA,KAAK,IAAP,EAAaC,UAAUD,IAAIS,OAA3B,EAAoCP,MAAM,EAA1C,EAAP;AACD;AACF,GAbK;;AAAA;AAAA;AAAA;AAAA,IAAN;;AAgBA,MAAMQ,oBAAoB,CAACC,CAAD,EAAIC,IAAJ,EAAUC,OAAV,KAAsB;AAC9CN,UAAQO,GAAR,CAAY,mBAAZ;AACA,SAAOpB,yBAAyBkB,IAAzB,CAAP;AACD,CAHD;;kBAKeF,iB","file":"returnProfileInfo.js","sourcesContent":["import db from '../../sequelize/models/db_connection'\n\nconst executeReturnProfileInfo = async ({ nonce }) => {\n  try {\n    let session = await db.Session.findOne(\n      { where: { nonce } },\n    )\n    if(!session) { return { err: true, response: 'Whoops! Something went wrong.', data: {} } }\n    let user = await session.getUser()\n    if(!user) { return { err: true, response: 'Whoops! Something went wrong.', data: {} } }\n    return { err: false, response: 'Success!', data: { ...user.get({ plain: true }) } }\n  } catch(err) {\n    console.error(err)\n    return { err: true, response: err.message, data: {} }\n  }\n}\n\n\nconst returnProfileInfo = (_, args, context) => {\n  console.log('returnProfileInfo')\n  return executeReturnProfileInfo(args)\n}\n\nexport default returnProfileInfo\n"]}